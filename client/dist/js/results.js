const urlParams=new URLSearchParams(window.location.search),sliderWrapper=document.querySelector(".slider-wrapper"),sliderButtons=document.querySelectorAll(".slider-button"),gameId=urlParams.get("id"),apiBaseUrl="http://localhost:3001/api/game";let currentImageIndex=0;async function fetchGameData(e){try{const t=await fetch(apiBaseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gameId:e})});return t.ok?await t.json():(console.error(`Error fetching game data: ${t.status} - ${t.statusText}`),null)}catch(e){console.error("Error fetching game data:",e)}}function formatDate(e){const t=new Date(e),r=t.getDate();return`${["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]} ${r}, ${t.getFullYear()}`}function updateGameInfo(e){if(e){document.querySelector(".game-title h2").textContent=e.name,document.querySelector(".game-date p").textContent=e.released?formatDate(e.released):"Unknown Release Date",document.querySelector(".game-genres p").textContent=e.genres.map((e=>e.name)).join(", "),document.querySelector(".game-platforms p").textContent=e.platforms.join(", "),document.querySelector(".rawg-rating p").textContent=e.rating,document.querySelector(".meta-rating p").textContent=e.meta;const t=document.querySelector(".slider-wrapper"),r=document.createElement("img");r.src=e.background_image,r.alt=e.name,t.appendChild(r),e.images&&Array.isArray(e.images)&&e.images.forEach((r=>{const a=document.createElement("img");a.src=r,a.alt=e.name,t.appendChild(a)})),document.querySelector(".game-desc p").innerHTML=e.description.replace(/<br>/g,"")}}async function initResultsPage(){if(gameId){const e=await fetchGameData(gameId);e?updateGameInfo(e):console.error("Game data is not valid.")}else console.error("Game ID not found in the URL.")}sliderButtons.forEach((e=>{e.addEventListener("click",(()=>{e.classList.contains("slider-button-left")?(currentImageIndex--,currentImageIndex<0&&(currentImageIndex=sliderWrapper.children.length-1)):e.classList.contains("slider-button-right")&&(currentImageIndex++,currentImageIndex>=sliderWrapper.children.length&&(currentImageIndex=0)),sliderWrapper.style.transform=`translateX(-${111.1*currentImageIndex}%)`}))})),initResultsPage();