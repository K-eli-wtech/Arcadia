<!--SEARCH PAGE-->
<!DOCTYPE html>
<html lang="en">

<!--Javascript for template header and footer-->
<script type=module src=./js/head-foot.js></script>

<!--Tab Header Information-->    
<head>
    <meta name="viewport" content="" width="device-width" initial-scale="1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="./js/profile-redirect.js"></script>
    <link rel="stylesheet" href="./css/default.css">
    <link rel="stylesheet" href="./css/search.css">
    <link rel="stylesheet" href="./css/card.css">
    <title> Arcadia</title>
</head>

<body onload="randomGames('title', 't-results', 4, 'mini'); randomGames('company', 'p-results', 4, 'mini'); randomGames('genre', 'g-results', 4, 'mini');">
  <!--This div wraps the entire page-->
  <div id="wrap">
    <!--Header and Navigation Bar-->
    <my-header></my-header>

    <div class="content">

    <h2 class="search-head">Search</h2>
    <div class="search-body">

      <!--Search Bar-->
      <div class="search-bar">
        <input type="text" placeholder="Search" id="search-input">
      </div>

      <p id="result"></p>

      <div id="search-results"></div>

      <div class="results-container">
        <div class="title-results">
          <h3>Game Titles</h3>
          <div id="t-results">
          </div>
        </div>

        <div class="publisher-results">
          <h3>Publishers</h3>
          <div id="p-results">
          </div>
        </div>

        <div class="genre-results">
          <h3>Genres</h3>
          <div id="g-results">
          </div>
        </div>
      </div>
    </div>

    </div>

    <!--Footer -->
    <my-footer></my-footer>

  </div>
</body>
  <!--Javascript for icons-->
  <script type=module src=https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js></script>
  <script nomodule src=https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js></script>
  <script src="./js/search.js"></script>
  <script src="./js/query.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
    const containers = document.querySelectorAll('#t-results, #p-results, #g-results, #search-results');

      containers.forEach((container) => {
          container.addEventListener('click', (event) => {
              if (event.target.closest('.card, .mini-card')) {
                  const id = event.target.closest('.card, .mini-card').id.trim();
                  console.log('Clicked: ', id)
                  window.location.href = `results.html?id=${id}`;
              }
          });
      });
    });
  </script>
</html>